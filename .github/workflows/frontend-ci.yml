name: Frontend CI - Lint HTML, CSS, and JavaScript

on:
  push:
    branches: [ main, develop ]
    paths:
      - 'app/src/main/resources/static/**'
      - 'app/src/main/resources/templates/**'
      - '.github/workflows/frontend-ci.yml'
  pull_request:
    branches: [ main, develop ]
    paths:
      - 'app/src/main/resources/static/**'
      - 'app/src/main/resources/templates/**'

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'

    - name: Install HTMLHint
      run: npm install -g htmlhint

    - name: Lint HTML files
      run: |
        htmlhint "app/src/main/resources/templates/**/*.html" || true

    - name: Install Stylelint
      run: npm install -g stylelint stylelint-config-standard

    - name: Create Stylelint config
      run: |
        echo '{"extends": "stylelint-config-standard"}' > .stylelintrc.json

    - name: Lint CSS files
      run: |
        stylelint "app/src/main/resources/static/**/*.css" || true

    - name: Install ESLint
      run: npm install -g eslint

    - name: Initialize ESLint config
      run: |
        echo '{"env": {"browser": true, "es2021": true}, "extends": "eslint:recommended", "parserOptions": {"ecmaVersion": 12}}' > .eslintrc.json

    - name: Lint JavaScript files
      run: |
        eslint "app/src/main/resources/static/**/*.js" || true

    - name: Summary
      run: echo "Frontend linting completed"
